version: '3.9'

services:
  backend:
    build: ./backend
    container_name: warehouse_backend
    networks:
      - npm_net
    expose:
      - '9000'
    restart: unless-stopped
    environment:
      NODE_ENV: production

  frontend:
    build: ./frontend
    container_name: warehouse_frontend
    networks:
      - npm_net
    expose:
      - '80'
    restart: unless-stopped
    environment:
      VITE_API_URL: '/api' # مسیر relative برای production

networks:
  npm_net:
    external: true
